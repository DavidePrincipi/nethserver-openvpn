Prepare CA environment:

mkdir /etc/openvpn/certs
touch /etc/openvpn/certs/certindex.attr
touch /etc/openvpn/certs/certindex
echo 01 > /etc/openvpn/certs/serial
echo 01 > /etc/openvpn/certs/crlnumber
openssl dhparam -out /etc/openvpn/certs/dh1024.pem 1024

Create a valid certificate:
1. Create a CA (we already have it in NSRV.crt)
2. Create a certificate signing request: this will create a csr file and a key file
   Eg:
       openssl req -batch -new  -nodes -keyout "/root/test.key" -out "/root/test.csr" -config /etc/openvpn/certs/openssl-openvpn.cnf
3. Sign the csr file
   Eg:
       openssl x509 -req -days 365 -in /root/test.csr -signkey /etc/pki/tls/private/NSRV.key -out /root/test.crt




Read crt informations:
openssl x509 -text -in /root/test.crt


Create a pcks12:
    openssl pkcs12  -export -in pippo2.crt -inkey pippo2.key -certfile /etc/pki/tls/certs/NSRV.crt  -name "mypippo2" -out pippo2.p12

Revoke a certificate:
/usr/bin/openssl ca -revoke  /etc/openvpn/certs/pippo2.crt  -config /etc/openvpn/certs/ca.cnf
/usr/bin/openssl ca -gencrl -out /etc/openvpn/certs/crl.pem -config /etc/openvpn/certs/ca.cnf


